management:
  endpoints:
    web:
      exposure:
        include: refresh, health, info, circuitbreakers
  health:
    circuitbreakers:
      enabled: true
teste: 
  fonte: "config-git, valor-dev."
feign:
  client:
    config:
      default:
        connectTimeout: 5000
        readTimeout: 5000
        loggerLevel: full
resilience4j:
  circuitbreaker:
    instances:
      endereco-user:
        registerHealthIndicator: true    # Permite monitorar a saúde do seu serviço protegido pelo Circuit Breaker.
        slidingWindowType: COUNT_BASED   # é a janela usada para calcular a taxa de falhas e decidir se o Circuit Breaker deve abrir. ou TIME_BASED
        slidingWindowSize: 2            # quantidade de chamadas analisadas
        minimumNumberOfCalls: 1          # mínimo de chamadas para ativar cálculo
        failureRateThreshold: 3         # % de falhas para abrir o circuito
        waitDurationInOpenState: 10s     # tempo de espera antes de ir para HALF_OPEN
        permittedNumberOfCallsInHalfOpenState: 3
        automaticTransitionFromOpenToHalfOpenEnabled: true
        slowCallDurationThreshold: 2s    # acima disso, conta como "lento"
        slowCallRateThreshold: 50        # % de chamadas lentas que abre o circuito
        recordExceptions:
          - feign.FeignException
          - java.io.IOException
        ignoreExceptions:
          - org.springframework.web.client.HttpClientErrorException$NotFound
